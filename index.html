<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8" />
        <title>Torque meets heatmaps on Leaflet</title>

        <link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.css" />
        <script src="http://leaflet.cloudmade.com/dist/leaflet.js" type="text/javascript"></script>
        <script type="text/javascript" src="torque-hm.js"></script>
        <script type="text/javascript" src="torque-hm-master.js"></script>
        <script type="text/javascript" src="torque-hm-leaflet.js"></script>
        <script src="http://libs.cartocdn.com/cartodb.js/v2/cartodb.js"></script>

        <style type="text/css">
            #map{
            }
        </style>

        <script type="text/javascript">
            function init(){
              var map = new L.Map("map");
              var markerLayers = new L.LayerGroup();
                var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/8ee2a50541944fb9bcedded5165f09d9/997/256/{z}/{x}/{y}.png',
                    cloudmadeAttrib = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
                    cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttrib});
                map.addLayer(cloudmade);

                map.setView(new L.LatLng(51.5171,-0.1062), 14);
                var torquemap = new L.TileLayer.Torque({map: map, user: 'pulsemaps', table: 'probes_20130322_innerlondon', resolution: 16, steps: 0.1, agg: 'log'});
                map.addLayer(torquemap);
            }

        </script>
    </head>

    <body onload="init();">
        <div>
            <h1>Mod heatmap for cacheable cartodb cubes with torquesque speed</h1>
            <p id="status"></p>
        </div>
        <div id="map" style="width:850px; height:500px;"></div>
    </body>
</html>
