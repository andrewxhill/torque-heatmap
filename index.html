<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8" />
        <title>Torque meets heatmaps on Leaflet</title>

        <link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.css" />
        
        <script src="http://leaflet.cloudmade.com/dist/leaflet.js" type="text/javascript"></script>
        
        <script type="text/javascript" src="torque-hm.js"></script>
        <script type="text/javascript" src="torque-hm-master.js"></script>
        <script type="text/javascript" src="torque-hm-leaflet.js"></script>
        <!-- 
        <script src="http://libs.cartocdn.com/cartodb.js/v2/cartodb.js"></script>
         -->
        <script src="cartodb.js"></script>

        <style type="text/css">
            #map{

            }
        </style>

        <script type="text/javascript">
            function init(){
              var map = new L.Map("map");
              var markerLayers = new L.LayerGroup();
                var url = "https://dnv9my2eseobd.cloudfront.net/v3/cartodb.map-uulyudas/{z}/{x}/{y}.png",
                    basemap = new L.TileLayer(url, {maxZoom: 18});
                map.addLayer(basemap);

                // map.setView(new L.LatLng(40.7,-73.975), 11);
                var torquemap = new L.TileLayer.Torque({map: map, user: 'viz2', table: 'sfrisk_dates', resolution: 16, steps: 0.1, agg: 'log'});
                map.addLayer(torquemap);
            }

        </script>
    </head>

    <body onload="init();">
        <div>
            <h1>Mod heatmap for cacheable cartodb cubes with torquesque speed</h1>
            <p id="status"></p>
        </div>
        <div>
            <div id="map" style="width:850px; height:500px;"></div>
        </div>
    </body>
</html>
